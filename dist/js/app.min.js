class ShoppingList{constructor(){this.items=this.loadItems(),this.itemForm=document.getElementById("itemForm"),this.itemName=document.getElementById("itemName"),this.itemQuantity=document.getElementById("itemQuantity"),this.itemPrice=document.getElementById("itemPrice"),this.itemCategory=document.getElementById("itemCategory"),this.itemList=document.getElementById("itemList"),this.totalPriceElement=document.getElementById("totalPrice"),this.submitButton=this.itemForm.querySelector('button[type="submit"]'),this.flashMessage=document.getElementById("flashMessage"),this.editIndex=null,this.itemForm.addEventListener("submit",t=>this.handleFormSubmit(t)),this.renderItems(),this.updateTotalPrice()}loadItems(){var t=localStorage.getItem("shoppingListItems");return t?JSON.parse(t):[]}saveItems(){localStorage.setItem("shoppingListItems",JSON.stringify(this.items))}showFlashMessage(){this.flashMessage.classList.add("active"),setTimeout(()=>{this.flashMessage.classList.remove("active")},3e3)}handleFormSubmit(t){t.preventDefault();var t=this.itemName.value,e=parseInt(this.itemQuantity.value),i=parseFloat(this.itemPrice.value),s=this.itemCategory.value;t&&0<e&&0<=i&&s&&(null!==this.editIndex?(this.items[this.editIndex]={name:t,quantity:e,price:i,category:s},this.editIndex=null,this.submitButton.classList.remove("edit"),this.submitButton.textContent="Adicionar Item"):this.items.push({name:t,quantity:e,price:i,category:s}),this.saveItems(),this.renderItems(),this.updateTotalPrice(),this.itemForm.reset(),this.itemCategory.value="",this.showFlashMessage())}deleteItem(t){this.items.splice(t,1),this.saveItems(),this.renderItems(),this.updateTotalPrice()}editItem(t){var e=this.items[t];this.itemName.value=e.name,this.itemQuantity.value=e.quantity,this.itemPrice.value=e.price,this.itemCategory.value=e.category,this.editIndex=t,this.submitButton.textContent="Salvar",this.submitButton.classList.add("edit")}renderItems(){this.itemList.innerHTML="",this.items.forEach((t,e)=>{var i=document.createElement("li"),s=document.createElement("div"),t=(s.insertAdjacentHTML("beforeend",`<span class="itemName"><strong>${t.name}</strong></span>`),s.insertAdjacentHTML("beforeend",`<span class="itemQuantity">${t.quantity}x</span>`),s.insertAdjacentHTML("beforeend",`<span class="itemPrice">R$${t.price.toFixed(2)}</span>`),s.insertAdjacentHTML("beforeend",`<span class="itemCategory">${t.category}</span>`),i.appendChild(s),document.createElement("button")),s=(t.innerHTML="&#128221",t.classList.add("edit-button"),t.onclick=()=>this.editItem(e),document.createElement("button"));s.classList.add("delete-button"),s.innerHTML="&#128163",s.onclick=()=>this.deleteItem(e),i.appendChild(t),i.appendChild(s),this.itemList.appendChild(i)})}updateTotalPrice(){var t=this.items.reduce((t,e)=>t+e.price*e.quantity,0);this.totalPriceElement.textContent=t.toFixed(2)}}document.addEventListener("DOMContentLoaded",()=>new ShoppingList);